<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Panza Verde Admin">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#2e7d32">
    <title>Panel Administrador - Panza Verde</title>
    <meta name="description" content="Panel de administración para gestionar productos de Panza Verde">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="admin-page">
    <div class="admin-container">
        <!-- Login Screen -->
        <div class="admin-login-screen" id="admin-login-screen">
            <div class="admin-login-card">
                <div class="admin-login-header">
                    <img src="https://i.imgur.com/8zf86ss.png" alt="Logo Panza Verde" class="admin-logo">
                    <h1>Panel Administrador</h1>
                    <p>Acceso exclusivo para personal autorizado</p>
                </div>
                <form id="admin-login-form" class="admin-login-form">
                    <div class="form-group">
                        <label for="admin-email">
                            <i class="fas fa-envelope"></i> Correo electrónico
                        </label>
                        <input type="email" id="admin-email" name="email" placeholder="admin@panzaverde.com" required autocomplete="email">
                    </div>
                    <div class="form-group">
                        <label for="admin-password">
                            <i class="fas fa-lock"></i> Contraseña
                        </label>
                        <input type="password" id="admin-password" name="password" placeholder="••••••••" required autocomplete="current-password">
                    </div>
                    <button type="submit" class="btn-admin-login">
                        <i class="fas fa-sign-in-alt"></i> Iniciar sesión
                    </button>
                </form>
                <div class="admin-login-footer">
                    <a href="index.html" class="back-to-store">
                        <i class="fas fa-arrow-left"></i> Volver a la tienda
                    </a>
                </div>
            </div>
        </div>

        <!-- Dashboard Screen -->
        <div class="admin-dashboard-screen" id="admin-dashboard-screen" hidden>
            <!-- Left Sidebar Navigation -->
            <aside class="admin-sidebar" id="admin-sidebar">
                <div class="admin-sidebar-header">
                    <img src="https://i.imgur.com/8zf86ss.png" alt="Logo" class="admin-sidebar-logo">
                    <h2>Panza Verde</h2>
                    <button class="admin-sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
                <nav class="admin-sidebar-nav">
                    <a href="#admin-stats-section" class="admin-nav-item active" data-section="stats">
                        <i class="fas fa-chart-bar"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="#product-management" class="admin-nav-item" data-section="products">
                        <i class="fas fa-box"></i>
                        <span>Productos</span>
                    </a>
                    <a href="#category-management" class="admin-nav-item" data-section="categories">
                        <i class="fas fa-tags"></i>
                        <span>Categorías</span>
                    </a>
                    <a href="#orders-management" class="admin-nav-item" data-section="orders">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Pedidos</span>
                    </a>
                    <a href="#blog-management" class="admin-nav-item" data-section="blog">
                        <i class="fas fa-blog"></i>
                        <span>Blog</span>
                    </a>
                    <a href="#buyers-management" class="admin-nav-item" data-section="buyers">
                        <i class="fas fa-users"></i>
                        <span>Compradores</span>
                    </a>
                </nav>
                <div class="admin-sidebar-footer">
                    <a href="index.html" class="admin-nav-item">
                        <i class="fas fa-store"></i>
                        <span>Ver Tienda</span>
                    </a>
                    <button id="admin-sidebar-logout-btn" class="admin-nav-item admin-logout-item">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Cerrar Sesión</span>
                    </button>
                </div>
            </aside>

            <div class="admin-content-wrapper">
                <header class="admin-header">
                    <div class="admin-header-content">
                        <div class="admin-header-left">
                            <button class="admin-mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">
                                <i class="fas fa-bars"></i>
                            </button>
                            <div>
                                <h2>Panel Administrador</h2>
                                <p id="admin-welcome-text">Bienvenida, Erandi</p>
                            </div>
                        </div>
                        <div class="admin-header-right">
                            <a href="index.html" class="admin-nav-link" title="Ver tienda">
                                <i class="fas fa-store"></i>
                                <span class="admin-nav-text">Tienda</span>
                            </a>
                            <button id="admin-logout-btn" class="admin-logout-btn" title="Cerrar sesión">
                                <i class="fas fa-sign-out-alt"></i>
                                <span class="admin-nav-text">Salir</span>
                            </button>
                        </div>
                    </div>
                </header>

                <main class="admin-main">
                <!-- Stats Section -->
                <section class="admin-stats" id="admin-stats-section" style="display: none;">
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-products">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-total-products">0</h3>
                            <p>Productos totales</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-featured">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-featured-products">0</h3>
                            <p>Productos destacados</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-categories">
                            <i class="fas fa-tags"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-categories">0</h3>
                            <p>Categorías</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-value">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-total-value">$0</h3>
                            <p>Valor inventario</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-orders">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-total-orders">0</h3>
                            <p>Pedidos totales</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-revenue">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="stat-total-revenue">$0</h3>
                            <p>Ingresos totales</p>
                        </div>
                    </div>
                </section>

                <!-- Product Management Section -->
                <section class="admin-section" id="product-management">
                    <div class="admin-section-header">
                        <h2><i class="fas fa-edit"></i> Gestionar Productos</h2>
                        <button id="new-product-btn" class="btn-new-product">
                            <i class="fas fa-plus"></i> Nuevo producto
                        </button>
                    </div>

                    <div class="admin-form-container" id="product-form-container">
                        <form id="product-form" class="admin-product-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="product-name">
                                        <i class="fas fa-tag"></i> Nombre del producto
                                    </label>
                                    <input type="text" id="product-name" name="name" placeholder="Ej: Gomitas de frutas" required>
                                </div>
                                <div class="form-group">
                                    <label for="product-price">
                                        <i class="fas fa-dollar-sign"></i> Precio (MXN)
                                    </label>
                                    <input type="number" id="product-price" name="price" min="0" step="0.01" placeholder="0.00" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="product-category">
                                        <i class="fas fa-folder"></i> Categoría
                                    </label>
                                    <select id="product-category" name="category" required>
                                        <option value="Dulces">Dulces</option>
                                        <option value="Dulces picositos">Dulces picositos</option>
                                        <option value="Botanas">Botanas</option>
                                        <option value="Otros">Otros</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="product-image">
                                        <i class="fas fa-image"></i> URL de imagen
                                    </label>
                                    <input type="url" id="product-image" name="img" placeholder="https://ejemplo.com/imagen.jpg">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="product-description">
                                    <i class="fas fa-align-left"></i> Descripción
                                </label>
                                <textarea id="product-description" name="includes" rows="3" placeholder="Descripción del producto, ingredientes, etc."></textarea>
                            </div>
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="product-featured" name="featured">
                                    <span><i class="fas fa-star"></i> Marcar como producto destacado</span>
                                </label>
                            </div>
                            <div class="form-actions">
                                <button type="button" id="clear-product-form" class="btn-secondary">
                                    <i class="fas fa-times"></i> Limpiar
                                </button>
                                <button type="submit" class="btn-primary" id="product-form-submit">
                                    <i class="fas fa-save"></i> Guardar producto
                                </button>
                            </div>
                        </form>
                    </div>
                </section>

                <!-- Category Management Section -->
                <section class="admin-section" id="category-management">
                    <div class="admin-section-header">
                        <h2><i class="fas fa-tags"></i> Gestionar Categorías</h2>
                        <button id="new-category-btn" class="btn-new-product">
                            <i class="fas fa-plus"></i> Nueva categoría
                        </button>
                    </div>
                    <div class="admin-form-container" id="category-form-container" style="display: none;">
                        <form id="category-form" class="admin-product-form">
                            <div class="form-group">
                                <label for="category-name">
                                    <i class="fas fa-tag"></i> Nombre de la categoría
                                </label>
                                <input type="text" id="category-name" name="name" placeholder="Ej: Snacks saludables" required>
                            </div>
                            <div class="form-actions">
                                <button type="button" id="cancel-category-form" class="btn-secondary">
                                    <i class="fas fa-times"></i> Cancelar
                                </button>
                                <button type="submit" class="btn-primary" id="category-form-submit">
                                    <i class="fas fa-save"></i> Guardar categoría
                                </button>
                            </div>
                        </form>
                    </div>
                    <div id="admin-categories-list" class="admin-categories-list"></div>
                </section>

                <!-- Products List Section -->
                <section class="admin-section">
                    <div class="admin-section-header">
                        <h2><i class="fas fa-list"></i> Lista de Productos</h2>
                        <div class="admin-actions">
                            <button id="seed-catalog-btn" class="btn-seed-catalog">
                                <i class="fas fa-bolt"></i> Importar catálogo base
                            </button>
                            <input type="text" id="admin-search" class="admin-search" placeholder="Buscar productos...">
                        </div>
                    </div>
                    <div id="admin-product-list" class="admin-product-list"></div>
                </section>

                <!-- Orders Management Section -->
                <section class="admin-section" id="orders-management">
                    <div class="admin-section-header">
                        <h2><i class="fas fa-shopping-cart"></i> Gestionar Pedidos</h2>
                        <div class="admin-actions">
                            <button id="new-order-btn" class="btn-new-product">
                                <i class="fas fa-plus"></i> Crear pedido
                            </button>
                            <input type="text" id="admin-order-search" class="admin-search" placeholder="Buscar pedidos...">
                        </div>
                    </div>
                    
                    <!-- Order Creation Form -->
                    <div class="admin-form-container" id="order-form-container" style="display: none;">
                        <form id="order-form" class="admin-product-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="order-customer-name">
                                        <i class="fas fa-user"></i> Nombre del cliente
                                    </label>
                                    <input type="text" id="order-customer-name" name="customerName" placeholder="Nombre completo" required>
                                </div>
                                <div class="form-group">
                                    <label for="order-customer-email">
                                        <i class="fas fa-envelope"></i> Correo del cliente
                                    </label>
                                    <input type="email" id="order-customer-email" name="customerEmail" placeholder="cliente@email.com" required>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="order-payment-method">
                                        <i class="fas fa-credit-card"></i> Método de pago
                                    </label>
                                    <select id="order-payment-method" name="paymentMethod" required>
                                        <option value="en línea">En línea (PayPal)</option>
                                        <option value="efectivo">Efectivo</option>
                                        <option value="Transferencia">Transferencia</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="order-status">
                                        <i class="fas fa-info-circle"></i> Estado inicial
                                    </label>
                                    <select id="order-status" name="status" required>
                                        <option value="pendiente">Pendiente</option>
                                        <option value="confirmado">Confirmado</option>
                                        <option value="en_preparacion">En preparación</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>
                                    <i class="fas fa-shopping-bag"></i> Productos del pedido
                                </label>
                                <div id="order-items-container" class="order-items-container">
                                    <div class="order-item-row">
                                        <select class="order-product-select" required>
                                            <option value="">Seleccionar producto</option>
                                        </select>
                                        <input type="number" class="order-quantity-input" min="1" value="1" placeholder="Cantidad" required>
                                        <button type="button" class="btn-remove-order-item" onclick="removeOrderItem(this)">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                                <button type="button" class="btn-secondary" onclick="addOrderItem()" style="margin-top: 0.5rem;">
                                    <i class="fas fa-plus"></i> Agregar producto
                                </button>
                            </div>
                            <div class="form-group">
                                <label>
                                    <i class="fas fa-dollar-sign"></i> Total calculado
                                </label>
                                <div id="order-total-display" class="order-total-display">$0.00</div>
                            </div>
                            <div class="form-actions">
                                <button type="button" id="cancel-order-form" class="btn-secondary">
                                    <i class="fas fa-times"></i> Cancelar
                                </button>
                                <button type="submit" class="btn-primary" id="order-form-submit">
                                    <i class="fas fa-save"></i> Crear pedido
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <div id="admin-orders-list" class="admin-orders-list"></div>
                </section>

                <!-- Blog Management Section -->
                <section class="admin-section" id="blog-management">
                    <div class="admin-section-header">
                        <h2><i class="fas fa-blog"></i> Gestionar Blog</h2>
                        <button id="new-blog-btn" class="btn-new-product">
                            <i class="fas fa-plus"></i> Nuevo artículo
                        </button>
                    </div>

                    <div class="admin-form-container" id="blog-form-container" style="display: none;">
                        <form id="blog-form" class="admin-product-form">
                            <div class="form-group">
                                <label for="blog-title">
                                    <i class="fas fa-heading"></i> Título del artículo
                                </label>
                                <input type="text" id="blog-title" name="title" placeholder="Ej: La Tradición de la Dulcería Mexicana" required>
                            </div>
                            <div class="form-group">
                                <label for="blog-excerpt">
                                    <i class="fas fa-align-left"></i> Resumen (excerpt)
                                </label>
                                <textarea id="blog-excerpt" name="excerpt" rows="2" placeholder="Breve descripción del artículo..." required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="blog-content">
                                    <i class="fas fa-file-alt"></i> Contenido completo
                                </label>
                                <textarea id="blog-content" name="content" rows="10" placeholder="Contenido completo del artículo en HTML..." required></textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="blog-category">
                                        <i class="fas fa-tag"></i> Categoría
                                    </label>
                                    <input type="text" id="blog-category" name="category" placeholder="Ej: Tradición, Ingredientes, Sabores" required>
                                </div>
                                <div class="form-group">
                                    <label for="blog-image">
                                        <i class="fas fa-image"></i> URL de imagen
                                    </label>
                                    <input type="url" id="blog-image" name="image" placeholder="https://ejemplo.com/imagen.jpg">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="blog-author">
                                    <i class="fas fa-user"></i> Autor
                                </label>
                                <input type="text" id="blog-author" name="author" placeholder="Panza Verde" value="Panza Verde">
                            </div>
                            <div class="form-actions">
                                <button type="button" id="cancel-blog-form" class="btn-secondary">
                                    <i class="fas fa-times"></i> Cancelar
                                </button>
                                <button type="submit" class="btn-primary">
                                    <i class="fas fa-save"></i> Guardar artículo
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <div id="admin-blog-list" class="admin-blog-list"></div>
                </section>

                <!-- Buyers Management Section -->
                <section class="admin-section" id="buyers-management">
                    <div class="admin-section-header">
                        <h2><i class="fas fa-users"></i> Información de Compradores</h2>
                    </div>
                    <div id="admin-buyers-list" class="admin-buyers-list"></div>
                </section>
                </main>
            </div>
        </div>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <script type="module" src="admin.js"></script>
</body>
</html>

